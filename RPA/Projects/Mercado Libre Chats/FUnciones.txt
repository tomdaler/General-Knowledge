mostrar mas informacion de cada agente

function openRowDetails(table,plus, queueId){
    var row = $(plus).parents('tr')[0];
    if ( table.fnIsOpen(row) )
    {
        this.className = 'glyphicon glyphicon-plus sign';
        table.fnClose( row );
    }
    else {
		console.log("ROW:"+row.data());
		$.ajax({
			url: "/supervisor/getAgentChats",
			data: {userId: row.data().id, queueId: queueId},
			method: "POST"
		}).done(function(html) {
			this.className = 'glyphicon glyphicon-minus sign';
			table.fnOpen( row, html,'details');
		});
      }
  }

function viewChat(chatId, tableId,agentId,userId){
		$.ajax({
			  url: "/supervisor/loadTranscript/"+chatId,
			}).done(function(data) {
			  $('#'+tableId+'CHAT'+userId).html(buildViewChat(data, chatId, agentId));
				  var elem = document.getElementById("conversacion_"+chatId);
				  elem.scrollTop = elem.scrollHeight;
			});
	}

	function viewChats(userId, queueId, row){
        $.ajax({
			url: "/supervisor/getAgentChats",
			data: {userId: userId, queueId: queueId},
			method: "POST"
			}).done(function(html) {
			$('#'+userId+'_chats').html(html);
        });
	}

	function buildViewChat(data, chatId, agentId){
		return "<div><div class='panel panel-default' id='conversacion_"+chatId+"' style='overflow:scroll; height: 200px; text-align: left;'>"+data+"</div><div id='mensaje'><input type='text' class='form-control' style='width:100%;margin-top: 5px; margin-right: 10px;' id='txt_sup'/><button type='button' onclick='javascript: sendMsgToRep(\""+chatId+"\", \""+agentId+"\");' class='btn btn-default btn-sm' nowrap>Enviar</button></div></div>";
	}

	function sendMsgToRep(chatId, userId){
		var msgTxt = $('#txt_sup').val();
		$.ajax({
			url: "/supervisor/sendMessageFromRoom?case_number="+chatId+"&user="+userId+"&msg="+msgTxt
		}).done(function(data) {
			var date = new Date;
			var minutes = date.getMinutes();
			var hour = date.getHours();
		 	$("#conversacion_"+chatId).append("<br/>("+ hour + ":" + minutes +") Supervisor: " + msgTxt);
			var elem = document.getElementById("conversacion_"+chatId);
			elem.scrollTop = elem.scrollHeight;
			$('#txt_sup').val("");
		});
	}

	function finalizeChatModal(room, userId, lastAgentId, skillId){
		var modalSelector = "#finalize_modal_"+skillId;
		var userIdInput = $(modalSelector+' .userId');
		var roomInput = $(modalSelector+' .room');
		var lastAgentIdInput = $(modalSelector+' .lastAgentId');
		userIdInput.val(userId);
		roomInput.val(room);
		lastAgentIdInput.val(lastAgentId);
		$(modalSelector).modal('show');
	}

    on_public_message = function (message) {
		var from = $(message).attr('from');
		var room = Strophe.getBareJidFromJid(from);
		var nick = Strophe.getResourceFromJid(from);
		var body = $(message).children('body').text();
		var delay = $(message).children("delay").attr("stamp");

		console.log(body);
		$("#conversacion_500J000000BEgC2").append(delay + " - " + nick + ": " + body+"<br>");
		return true;
	};